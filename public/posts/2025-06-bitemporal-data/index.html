






<!doctype html>
<html
  lang="en"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="dark"
  data-auto-appearance="true"
><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#FFFFFF" />
  
  <title>Bitemporal Data: Timetravel your Data &middot; PhiloBlog</title>
    <meta name="title" content="Bitemporal Data: Timetravel your Data &middot; PhiloBlog" />
  
  
  
  
  
  <script
    type="text/javascript"
    src="http://localhost:1313/js/appearance.min.8a082f81b27f3cb2ee528df0b0bdc39787034cf2cc34d4669fbc9977c929023c.js"
    integrity="sha256-iggvgbJ/PLLuUo3wsL3Dl4cDTPLMNNRmn7yZd8kpAjw="
  ></script>
  
  
  
  
  
  
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="http://localhost:1313/css/main.bundle.min.14c0530276ab23a81a1b590ad04c824b39a6eb6e1b6446a5c58dc39ba3b4afcd.css"
    integrity="sha256-FMBTAnarI6gaG1kK0EyCSzmm624bZEalxY3Dm6O0r80="
  />
  
    
    
    
  
  
  
  
  
  
    
    <script
      defer
      type="text/javascript"
      id="script-bundle"
      src="http://localhost:1313/js/main.bundle.min.85588ca4a09487934eca6830f4d8ec6b443b96cf1895ddf10249e8f2ddddeb74.js"
      integrity="sha256-hViMpKCUh5NOymgw9Njsa0Q7ls8Yld3xAkno8t3d63Q="
      data-copy="Copy"
      data-copied="Copied"
    ></script>
  
  
  <meta
    name="description"
    content="
      Bitemporal data is a way to store data that has two time dimensions - the actual time and the record time.
    "
  />
  
  
  
  
    <link rel="canonical" href="http://localhost:1313/posts/2025-06-bitemporal-data/" />
  
  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  
  <meta property="og:url" content="http://localhost:1313/posts/2025-06-bitemporal-data/">
  <meta property="og:site_name" content="PhiloBlog">
  <meta property="og:title" content="Bitemporal Data: Timetravel your Data">
  <meta property="og:description" content="Bitemporal data is a way to store data that has two time dimensions - the actual time and the record time.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-07-10T10:20:44+02:00">
    <meta property="article:modified_time" content="2025-07-10T10:20:44+02:00">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="Development">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Bitemporal Data: Timetravel your Data">
  <meta name="twitter:description" content="Bitemporal data is a way to store data that has two time dimensions - the actual time and the record time.">

  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Bitemporal Data: Timetravel your Data",
    "headline": "Bitemporal Data: Timetravel your Data",
    "description": "Bitemporal data is a way to store data that has two time dimensions - the actual time and the record time.",
    
    "inLanguage": "en",
    "url" : "http:\/\/localhost:1313\/posts\/2025-06-bitemporal-data\/",
    "author" : {
      "@type": "Person",
      "name": "Sofia Fischer"
    },
    "copyrightYear": "2025",
    "dateCreated": "2025-07-10T10:20:44\u002b02:00",
    "datePublished": "2025-07-10T10:20:44\u002b02:00",
    
    "dateModified": "2025-07-10T10:20:44\u002b02:00",
    
    "keywords": ["Python","Development"],
    
    "mainEntityOfPage": "true",
    "wordCount": "2326"
  }
  </script>
    
    <script type="application/ld+json">
    {
   "@context": "https://schema.org",
   "@type": "BreadcrumbList",
   "itemListElement": [
     {
       "@type": "ListItem",
       "item": "http://localhost:1313/",
       "name": "Philo Blog",
       "position": 1
     },
     {
       "@type": "ListItem",
       "item": "http://localhost:1313/posts/",
       "name": "Posts",
       "position": 2
     },
     {
       "@type": "ListItem",
       "name": "Bitemporal Data Timetravel Your Data",
       "position": 3
     }
   ]
 }
  </script>

  
  
    <meta name="author" content="Sofia Fischer" />
  
  
    
      <link href="mailto:sofia@philodev.com" rel="me" />
    
      <link href="https://github.com/sofia-fischer" rel="me" />
    
      <link href="https://www.linkedin.com/in/sofia-fischer-58b1611b9/" rel="me" />
    
  
  
  







  
  

  
  
</head>
<body
    class="m-auto flex h-screen max-w-7xl flex-col bg-neutral px-6 text-lg leading-7 text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"
  >
    <div id="the-top" class="absolute flex self-center">
      <a
        class="-translate-y-8 rounded-b-lg bg-primary-200 px-3 py-1 text-sm focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content"
        ><span class="pe-2 font-bold text-primary-600 dark:text-primary-400">&darr;</span
        >Skip to main content</a
      >
    </div>
    
    
      <header class="py-6 font-semibold text-neutral-900 dark:text-neutral sm:py-10 print:hidden">
  <nav class="flex items-start justify-between sm:items-center">
    
    <div class="flex flex-row items-center">
      
    <a href="/" class="mr-2">
      
      <img
        src="http://localhost:1313/logo.png"
        width="1012"
        height="1012"
        class="max-h-[10rem] max-w-[10rem] object-scale-down object-left
        "
        alt="PhiloBlog"
      />
    </a>
  <a
    class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
    rel="me"
    href="/"
    >PhiloBlog</a
  >

    </div>
    
    
      <ul class="flex list-none flex-col text-end sm:flex-row">
        
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/posts/"
                  title="Posts"
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >Posts</span
                    >
                  </a
                >
              
            </li>
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/tags/"
                  title="Tags"
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >Tags</span
                    >
                  </a
                >
              
            </li>
          
          
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0">
              <button id="search-button-m0" title="Search (/)">
                <span
                  class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"
                >
                  <span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
                </span>
              </button>
            </li>
          
        
      </ul>
    
  </nav>
</header>

    
    <div class="relative flex grow flex-col">
      <main id="main-content" class="grow">
        
  <article>
    <header class="max-w-prose">
      
        <ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
  
  
    
  
    
  
  <li class="hidden inline">
    <a
      class="dark:underline-neutral-600 decoration-neutral-300 hover:underline"
      href="http://localhost:1313/"
      >PhiloBlog</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class=" inline">
    <a
      class="dark:underline-neutral-600 decoration-neutral-300 hover:underline"
      href="http://localhost:1313/posts/"
      >Posts</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="hidden inline">
    <a
      class="dark:underline-neutral-600 decoration-neutral-300 hover:underline"
      href="http://localhost:1313/posts/2025-06-bitemporal-data/"
      >Bitemporal Data: Timetravel your Data</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

</ol>


      
      <h1 class="mb-8 mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Bitemporal Data: Timetravel your Data
      </h1>
      
        <div class="mb-10 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
          





  
  



  

  
  
    
  

  

  

  
    
  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2025-07-10 10:20:44 &#43;0200 CEST">10 July 2025</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">11 mins</span>
    

    
    
  </div>

  
  
    <div class="my-1 flex flex-wrap text-xs leading-relaxed text-neutral-500 dark:text-neutral-400">
      
        
      
        
          
            <a
              href="http://localhost:1313/tags/python/"
              class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400"
              >Python</a
            >
          
            <a
              href="http://localhost:1313/tags/development/"
              class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400"
              >Development</a
            >
          
        
      
    </div>
  


        </div>
      
      
    </header>
    <section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row">
      
        <div class="order-first px-0 lg:order-last lg:max-w-xs lg:ps-8">
          <div class="toc pe-5 lg:sticky lg:top-10 print:hidden">
            <details open class="-ms-5 mt-0 overflow-hidden rounded-lg ps-5">
  <summary
    class="block cursor-pointer bg-neutral-100 py-1 ps-5 text-lg font-semibold text-neutral-800 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden"
  >
    Table of Contents
  </summary>
  <div class="border-s border-dotted border-neutral-300 py-2 ps-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#from-temporal-data-to-bitemporal-state-data">From Temporal Data to Bitemporal State Data</a>
          <ul>
            <li><a href="#temporal-data">Temporal Data</a></li>
            <li><a href="#non-linear-data-reporting">Non linear data reporting</a></li>
            <li><a href="#understanding-bitemporal-data">Understanding Bitemporal Data</a></li>
          </ul>
        </li>
        <li><a href="#inserting-bitemporal-data">Inserting Bitemporal Data</a>
          <ul>
            <li><a href="#types-of-collisions-side-quest">Types of Collisions (Side Quest)</a></li>
            <li><a href="#handling-sets-of-collisions">Handling sets of collisions</a></li>
            <li><a href="#bitemporal-databases">Bitemporal Databases</a></li>
          </ul>
        </li>
        <li><a href="#some-thoughts-on-downsides-of-bitemporal-data">Some Thoughts on downsides of Bitemporal Data</a></li>
        <li><a href="#conclusion">Conclusion</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>

          </div>
        </div>
      
      <div class="min-h-0 min-w-0 max-w-prose grow">
        <div class="lead !mb-9 text-xl">
  Storing historic data becomes more complex if the historic data changes over time and if those changes
should be accessible. Bitemporal data is a way to store data that has two time dimensions: the actual time and the
record time.
</div>

<h2 id="from-temporal-data-to-bitemporal-state-data" class="relative group">From Temporal Data to Bitemporal State Data <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#from-temporal-data-to-bitemporal-state-data" aria-label="Anchor">#</a></span></h2><h3 id="temporal-data" class="relative group">Temporal Data <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#temporal-data" aria-label="Anchor">#</a></span></h3><p>Temporal data is data modelling historic changes of something. Most data in modern dataases is temporal data just by
storing a <code>created_at</code>. But intentionally temporal data is often implemented by a model having a <code>actual_from</code> and
<code>actual_to</code> properties (or <code>valid_to</code>, <code>active_to</code>, <code>ended_at</code> &hellip;), which correspond to non-overlapping time periods.</p>
<p>Some examples for this:</p>
<ul>
<li>Price tracking over time: The cupcake did cost 3,55€ in the last week, but this week the price was increased to 3,75€,
and on monday there will be a sale and it will only cost 3€</li>
<li>library book rental history: The book was rented by Ari from 01.03 until 01.04, nobody took it for a month, then Noa
took it and still has it.</li>
<li>Chameleon color change over time: The color was green yesterday, and today the color changed from green to magenta.</li>
</ul>
<p>From a technical point of view, this enables a nice implementation; a database constrain can ensure that there are no
overlapping time periods.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">datetime</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ChameleonColor</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">actual_from</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span>
</span></span><span class="line"><span class="cl">    <span class="n">actual_to</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">    <span class="n">color</span><span class="p">:</span> <span class="nb">str</span>
</span></span></code></pre></div><h3 id="non-linear-data-reporting" class="relative group">Non linear data reporting <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#non-linear-data-reporting" aria-label="Anchor">#</a></span></h3><p>The moment the data becomes available not in a linear way, the simple temporal data model becomes more complex to
handle.
What if the information on what color the chameleon has arrives not at the moment it changes, but only as it has been
recorded to the system.</p>
<p>Keeping those reports can be necessary to proof what knowledge was present in a point in time, or just to
understand what has happened when an error occurred, or to being able to react to unreliable data that might be
canceled later.</p>
<p>This adds a new time dimension to the existing model: the point in time in which the actual information was recorded,
and the point in time in which the recorded time was overwritten by more recent data. The naming of those properties
vary (because naming is hard), a common combinations are <code>actual_from</code> and <code>recorded_at</code> coined by Martin
Fowler <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>, <code>valid_from</code> and <code>recorded_at</code> coined by Richard Snodgrass <sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">datetime</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ChameleonColor</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">actual_from</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span>
</span></span><span class="line"><span class="cl">    <span class="n">actual_to</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">    <span class="n">color</span><span class="p">:</span> <span class="nb">str</span>
</span></span><span class="line"><span class="cl">    <span class="n">recorded_at</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span>
</span></span><span class="line"><span class="cl">    <span class="n">record_overwritten_at</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span>
</span></span></code></pre></div><h3 id="understanding-bitemporal-data" class="relative group">Understanding Bitemporal Data <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#understanding-bitemporal-data" aria-label="Anchor">#</a></span></h3><p><strong>Do we need a <code>record_overwritten_at</code>?</strong></p>
<p>Just looking at a query to retrieve the state of the chameleon at a specific point in time, there is no need to add a
column that just records when a period was overwritten. But to utilize database constraints to ensure that there are no
overlapping time periods in the calculated reality, a <code>record_overwritten_at</code> that is <code>None</code> for the valid period makes
everything easier.</p>
<p><strong>How to read bitemporal data?</strong></p>
<p>Looking at an example of a chameleon that was recorded green at 2025-01-01, then changed to magenta at 2025-01-05, but
the system only recorded the change at 2025-01-09.</p>
<table>
  <thead>
      <tr>
          <th>actual_from</th>
          <th>actual_to</th>
          <th>color</th>
          <th>recorded_at</th>
          <th>record_overwritten_at</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>2025-01-01</td>
          <td>NULL</td>
          <td>green</td>
          <td>2025-01-01</td>
          <td>2025-01-09</td>
      </tr>
      <tr>
          <td>2025-01-01</td>
          <td>2025-01-05</td>
          <td>green</td>
          <td>2025-01-09</td>
          <td>NULL</td>
      </tr>
      <tr>
          <td>2025-01-05</td>
          <td>NULL</td>
          <td>magenta</td>
          <td>2025-01-09</td>
          <td>NULL</td>
      </tr>
  </tbody>
</table>
<p>The SQL query to retrieve the current state of the chameleon at 2025-01-07 would look like this and return <code>magenta</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">color</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">chameleon_color</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">actual_from</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="s1">&#39;2025-01-07&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="p">(</span><span class="n">actual_to</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">actual_to</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2025-01-07&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="p">(</span><span class="n">record_overwritten_at</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="p">)</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span></span></span></code></pre></div><p>Visually, this can be represented as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">- - - - - - - - - - - - - - - -  Point in time imagine we are - now
</span></span><span class="line"><span class="cl">2025-01-09 ------█|██   magenta
</span></span><span class="line"><span class="cl">2025-01-09 -█████----   new green period
</span></span><span class="line"><span class="cl">2025-01-01 -░░░░░░|░░   green, invalidated
</span></span><span class="line"><span class="cl">                  ↑ Point in time we are looking for at 2025-01-07
</span></span></code></pre></div><p>The SQL query to retrieve the state of the chameleon at a specific point in time (like 2025-01-07) from the perspective
of one day later (2025-01-08) asking effectively &ldquo;it was 2025-01-07, which color would we think the chameleon had
yesterday?&rdquo; The SQL query would look something like this and return <code>green</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">color</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">chameleon_color</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">actual_from</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="s1">&#39;2025-01-07&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="p">(</span><span class="n">actual_to</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">actual_to</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2025-01-07&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">recorded_at</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="s1">&#39;2025-01-08&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="p">(</span><span class="n">record_overwritten_at</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">record_overwritten_at</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2025-01-08&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">recorded_at</span><span class="w"> </span><span class="k">ASC</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span></span></span></code></pre></div><p>Visually, this can be represented as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">2025-01-09 ------█|██   magenta
</span></span><span class="line"><span class="cl">2025-01-09 -█████----   new green period
</span></span><span class="line"><span class="cl">- - - - - - - - - - - - - - - -  Point in time imagine we are at 2025-01-08
</span></span><span class="line"><span class="cl">2025-01-01 -░░░░░░|░░   green, invalidated
</span></span><span class="line"><span class="cl">                  ↑ Point in time we are looking for at 2025-01-07
</span></span></code></pre></div><p>Mind that we do not get the &ldquo;real&rdquo; state of the chameleon at 2025-01-07, but the state as the system thought it was.</p>
<p><strong>In case of a collision, should we add more rows or update?</strong></p>
<p>Looking at an example of trying to insert a new period, that should overwrite an existing period:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">A ------███-  more recent period
</span></span><span class="line"><span class="cl">B -███████--  old period
</span></span></code></pre></div><p>We could just split the old period, saving pressures database storage:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">A ------███-  more recent period
</span></span><span class="line"><span class="cl">B -█████----  valid part of old period
</span></span><span class="line"><span class="cl">B ------░---  invalid part of old period
</span></span></code></pre></div><p>While this works in theory, it is much harder to recalculate the reality of the data at a specific point in time.
What accountants use since centuries to add a new period for to replace invalid old data preserves the history of the
data. Making the rows immutable except for the <code>record_overwritten_at</code> column, allows much more trust in the
data ensures no data is lost.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">A ------███-  more recent period
</span></span><span class="line"><span class="cl">B -█████----  valid state old period
</span></span><span class="line"><span class="cl">B -░░░░░░░--  invalid state of old period
</span></span></code></pre></div><p><strong>How to insert an period</strong></p>
<p>An new period is inserted by</p>
<ul>
<li>find any collisions with existing periods</li>
<li>invalidate the existing, older periods by setting their <code>record_overwritten_at</code> to the new periods <code>recorded_at</code></li>
<li>insert new periods to represent the current actual state of the data with <code>recorded_overwritten_at</code> set to <code>NULL</code></li>
</ul>
<h2 id="inserting-bitemporal-data" class="relative group">Inserting Bitemporal Data <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#inserting-bitemporal-data" aria-label="Anchor">#</a></span></h2><p>Inserting a new period in chronological order with always open-ended periods is easy: invalidate the existing period,
and create a new &ldquo;existing&rdquo; period that ends as the new period starts, and the new period.</p>
<p>But what if finite periods can be inserted in any order? Lets look at this example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">2025-01-05 --█-------  teal
</span></span><span class="line"><span class="cl">2025-01-04 ------██--  turquoise
</span></span><span class="line"><span class="cl">- - - - - - - - - -  Point in time magenta is inserted spanning over the whole time
</span></span><span class="line"><span class="cl">2025-01-02 ██--------  green
</span></span><span class="line"><span class="cl">2025-01-01 ----█-----  blue
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">With new data
</span></span><span class="line"><span class="cl">2025-01-05 --█-------  teal
</span></span><span class="line"><span class="cl">2025-01-04 ------██--  turquoise
</span></span><span class="line"><span class="cl">- - - - - - - - -  
</span></span><span class="line"><span class="cl">2025-01-03 --------█-  magenta 
</span></span><span class="line"><span class="cl">2025-01-03 ---███----  magenta
</span></span><span class="line"><span class="cl">2025-01-03 -█--------  magenta
</span></span><span class="line"><span class="cl">2025-01-03 █---------  green
</span></span><span class="line"><span class="cl">2025-01-03 -░░░░░░░░-  magenta
</span></span><span class="line"><span class="cl">- - - - - - - - - 
</span></span><span class="line"><span class="cl">2025-01-02 ░░--------  green
</span></span><span class="line"><span class="cl">2025-01-01 ----░-----  blue
</span></span></code></pre></div><p>To insert the magenta period,</p>
<ul>
<li>the blue and green periods need to be invalidated, as they are older and colliding with the new period</li>
<li>the new magenta period needs to be inserted, but invalidated as there are more recent, colliding periods</li>
<li>a new green period needs to be inserted, because while the green period is partially colliding with the magenta
period, it started before the magenta period and is still valid until the start of the magenta period.</li>
<li>a new magenta period needs to be inserted to fill the gap between the green and teal period</li>
<li>a new magenta period needs to be inserted to fill the gap between the teal and turquoise period</li>
<li>a new magenta period needs to be inserted for the fraction of the magenta period that lasts longer than the turquoise
period.</li>
</ul>
<h3 id="types-of-collisions-side-quest" class="relative group">Types of Collisions (Side Quest) <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#types-of-collisions-side-quest" aria-label="Anchor">#</a></span></h3><p>Following a first thought, I wanted to go by the flow of time and deciding for each period if it is newer or older, and
what insertions or updates need to be performed.</p>
<p>The relationships between two periods can be one out of 13 defined relationships, mathematically defined by James
Allen [^snodgrass]. While periods can be ordered by many things (the length, the start, the end, creation date),
ordering by the start date leaves 7 relationship between each period and the next one.</p>
<table>
  <thead>
      <tr>
          <th>Relationship</th>
          <th>Visualisation</th>
          <th>Definition</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>A before B</td>
          <td><code>A -███------</code> <br> <code>B ------███-</code></td>
          <td>A₂ &lt; B₁</td>
      </tr>
      <tr>
          <td>A meets B</td>
          <td><code>A -████-----</code> <br> <code>B -----██---</code></td>
          <td>A₂ = B₁</td>
      </tr>
      <tr>
          <td>A overlaps B</td>
          <td><code>A -████-----</code> <br> <code>B ----█████-</code></td>
          <td>A₁ &lt; B₁ AND B₂ &lt; A₂</td>
      </tr>
      <tr>
          <td>A equals B</td>
          <td><code>A ---████---</code> <br> <code>B ---████---</code></td>
          <td>A₁ = B₁ AND A₂ = B₂</td>
      </tr>
      <tr>
          <td>A starts B</td>
          <td><code>A ---███----</code> <br> <code>B ---██████-</code></td>
          <td>A₁ = B₁ AND A₂ &lt; B₂</td>
      </tr>
      <tr>
          <td>A finished by B</td>
          <td><code>A -██████---</code> <br> <code>B ------█---</code></td>
          <td>A₁ &lt; B₁ AND B₂ = A₂</td>
      </tr>
      <tr>
          <td>A contains B <br> (B is during A)</td>
          <td><code>A ---██████-</code> <br> <code>B ----███---</code></td>
          <td>A₁ &lt; B₁ AND B₂ &lt; A₂</td>
      </tr>
  </tbody>
</table>
<p>Out of the 7 relationships, 6 will result in a collision that needs to be handled, and will result in at least two rows
to be touched.
Considering that any in any the 6 relationships, any of the periods can be the newer one, there are 12 cases to handle -
a number of ifs that can quickly grow out of hand.</p>
<p>But looking at the complex example, the solution might be much simpler.</p>
<h3 id="handling-sets-of-collisions" class="relative group">Handling sets of collisions <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#handling-sets-of-collisions" aria-label="Anchor">#</a></span></h3><p>Instead of trying to handle each period individually, it is much easier to handle sets of periods that are colliding.</p>
<ol>
<li>The first set ist the set of all periods that are colliding with the new period, but are older and must be
invalidated.</li>
<li>There might be one period that started before the new period started, and was invalidated by the new period.
It has a fraction that must remain valid until the start of the new period. That fraction needs to be inserted as a
new valid period.</li>
<li>There might be one period that ended after the new period ended, and was invalidated by the new period.
It has a fraction that must remain valid after the end of the new period. That fraction needs to be inserted as a new
valid period.</li>
<li>Create the new period, valid if there are no newer periods colliding with the new period, otherwise invalid.</li>
<li>The last set consists of all periods that are colliding with the new period, but are more recent than the new period.
For each gab between those periods, a new period needs to be inserted that covers the gap and corresponds to the new
period.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">datetime</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">insert_period</span><span class="p">(</span><span class="n">actual_from</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">,</span> <span class="n">actual_to</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">recorded_at</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">colliding_periods</span> <span class="o">=</span> <span class="n">queries</span><span class="o">.</span><span class="n">get_ordered_colliding_valid_periods</span><span class="p">(</span><span class="n">actual_from</span><span class="p">,</span> <span class="n">actual_to</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">colliding_older_periods</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="n">period</span> <span class="k">for</span> <span class="n">period</span> <span class="ow">in</span> <span class="n">colliding_periods</span> <span class="k">if</span> <span class="n">period</span><span class="o">.</span><span class="n">recorded_at</span> <span class="o">&lt;=</span> <span class="n">recorded_at</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">colliding_newer_periods</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="n">period</span> <span class="k">for</span> <span class="n">period</span> <span class="ow">in</span> <span class="n">colliding_periods</span> <span class="k">if</span> <span class="n">period</span><span class="o">.</span><span class="n">recorded_at</span> <span class="o">&gt;</span> <span class="n">recorded_at</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 1. invalidate all colliding periods that are older than the new period</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">period</span> <span class="ow">in</span> <span class="n">colliding_older_periods</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">period</span><span class="o">.</span><span class="n">recorded_at</span> <span class="o">&lt;=</span> <span class="n">recorded_at</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">period</span><span class="o">.</span><span class="n">recorded_overwritten_at</span> <span class="o">=</span> <span class="n">recorded_at</span>
</span></span><span class="line"><span class="cl">            <span class="n">period</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 2. check for start fraction of older periods</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">first_period</span> <span class="o">:=</span> <span class="n">colliding_older_periods</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">and</span> <span class="n">first_period</span><span class="o">.</span><span class="n">actual_from</span> <span class="o">&lt;</span> <span class="n">actual_from</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">create_period</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">actual_from</span> <span class="o">==</span> <span class="n">first_period</span><span class="o">.</span><span class="n">actual_from</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">actual_to</span><span class="o">=</span><span class="n">start</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">color</span><span class="o">=</span><span class="n">first_period</span><span class="o">.</span><span class="n">color</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">recorded_at</span><span class="o">=</span><span class="n">recorded_at</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 3. check for end fraction of older periods</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">((</span><span class="n">last_period</span> <span class="o">:=</span> <span class="n">colliding_older_periods</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="ow">and</span> <span class="n">actual_to</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">            <span class="ow">and</span> <span class="p">(</span><span class="n">last_period</span><span class="o">.</span><span class="n">actual_to</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">last_period</span><span class="o">.</span><span class="n">actual_to</span> <span class="o">&gt;</span> <span class="n">actual_to</span><span class="p">)):</span>
</span></span><span class="line"><span class="cl">        <span class="n">create_period</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">actual_from</span><span class="o">=</span><span class="n">actual_to</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">actual_to</span><span class="o">=</span><span class="n">last_period</span><span class="o">.</span><span class="n">actual_to</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">color</span><span class="o">=</span><span class="n">last_period</span><span class="o">.</span><span class="n">color</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">recorded_at</span><span class="o">=</span><span class="n">recorded_at</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 4. create new period</span>
</span></span><span class="line"><span class="cl">    <span class="n">maybe_overwriten_at</span> <span class="o">=</span> <span class="n">colliding_newer_periods</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">recorded_at</span> <span class="k">if</span> <span class="n">colliding_newer_periods</span> <span class="k">else</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">    <span class="n">create_period</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">actual_from</span><span class="o">=</span><span class="n">actual_from</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">actual_to</span><span class="o">=</span><span class="n">actual_to</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">recorded_at</span><span class="o">=</span><span class="n">recorded_at</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">record_overwritten_at</span><span class="o">=</span><span class="n">maybe_overwriten_at</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 5. handle gaps between newer periods</span>
</span></span><span class="line"><span class="cl">    <span class="n">fractions</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">    <span class="n">current_start</span> <span class="o">=</span> <span class="n">actual_from</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">period</span> <span class="ow">in</span> <span class="n">colliding_newer_periods</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">current_start</span> <span class="o">&lt;</span> <span class="n">period</span><span class="o">.</span><span class="n">actual_from</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">fractions</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">current_start</span><span class="p">,</span> <span class="n">period</span><span class="o">.</span><span class="n">actual_from</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">period</span><span class="o">.</span><span class="n">actual_to</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">period</span><span class="o">.</span><span class="n">actual_to</span> <span class="o">&gt;</span> <span class="n">actual_to</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">fractions</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">current_start</span><span class="p">,</span> <span class="n">actual_to</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="bitemporal-databases" class="relative group">Bitemporal Databases <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#bitemporal-databases" aria-label="Anchor">#</a></span></h3><p>These patterns do not feel like most relational database patterns. After some reasearch, I found databases that are
specialised to bitemporal data, like <a href="https://github.com/xtdb/xtdb" target="_blank" rel="noreferrer">XTDB</a>. The database is written in Clojure, and uses
event storage under the hood to handle second dimensions of time <sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>.
Looking at the pattern, the partial immutability of the data, and the inserting of new periods as new entries, even if
it to update existing data, id displays indeed many similarities to event sourcing.</p>
<h2 id="some-thoughts-on-downsides-of-bitemporal-data" class="relative group">Some Thoughts on downsides of Bitemporal Data <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#some-thoughts-on-downsides-of-bitemporal-data" aria-label="Anchor">#</a></span></h2><p>Looking back at the example, inserting 5 rows for a new single new period is a lot. There is not really a way to
euphemise an algorithm that will worst case insert n + 1 rows for a new record, with n being the number of existing
records.
Tables of this bitemporal state data can grow very large, and the database will need to handle a lot of rows.
The patterns discussed here are not trivial, and do not match what at least I learned in university about normalized
databases.</p>
<p>But looking at alternatives; updating the rows and then handling all the case of overlapping periods will result in
an even more complex algorithm, and will provide less trust in the data. Also, this concept of bitemporal data is not
new, some sources I found date back to 2000, and there are many resources to find on the topic. Having the need for
bitemporal data, and trying to optimize for storage consumption, is a trade-off that will cost in readability,
complexity, and reasearchability of the used patterns - if you think otherwise I would be happy to hear your thoughts!</p>
<h2 id="conclusion" class="relative group">Conclusion <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#conclusion" aria-label="Anchor">#</a></span></h2><p>Bitemporal data is always complex to wrap around.
The amount of articles and resources on this topic is extensive, and I did read through many of posts,
one book, and one podcasts to understand some more granular details of the patterns. They all use different
visualizations, often different namings, with mostly the same approaches to the problem. So while I am confident that
the approach I presented here is one proven way to handle bitemporal data.</p>
<p>The main inspiration for this article was Simeon (big thanks!), who phrased it in his talks as &ldquo;You understand
bitemporal data, until you don&rsquo;t. And when you need it, you understand it again&rdquo;.</p>
<p>This article, as all my public learnings, is my way to understand things, and hopefully have an easy time to
re-understand the concepts and patterns.</p>
<p>Happy coding :)</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://martinfowler.com/articles/bitemporal-history.html" target="_blank" rel="noreferrer">Martin Fowler on Bitemporal Data</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>Developing Time-Oriented Database Applications in SQL (The Morgan Kaufmann Series in Data Management
Systems) by Richard T. Snodgrass&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3">
<p><a href="https://podcasts.apple.com/au/podcast/bitemporal-databases-what-they-are-and-why-they/id1687271887?i=1000616019962" target="_blank" rel="noreferrer">Clojure Podcast on XTDB</a>&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

      </div>
    </section>
    <footer class="max-w-prose pt-8 print:hidden">
      
  <div class="flex">
    
    
    
    <div class="place-self-center">
      
        <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
          Author
        </div>
        <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
          Sofia Fischer
        </div>
      
      
      <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
          style="will-change:transform;"
          href="mailto:sofia@philodev.com"
          target="_blank"
          aria-label="Email"
          rel="me noopener noreferrer"
          ><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>
</span></a
        >
      
    
      
        <a
          class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
          style="will-change:transform;"
          href="https://github.com/sofia-fischer"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          ><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></a
        >
      
    
      
        <a
          class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
          style="will-change:transform;"
          href="https://www.linkedin.com/in/sofia-fischer-58b1611b9/"
          target="_blank"
          aria-label="Linkedin"
          rel="me noopener noreferrer"
          ><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a
        >
      
    
  </div>

</div>
    </div>
  </div>


      

      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="group flex" href="http://localhost:1313/posts/2025-05-python-meta-programming/">
              <span
                class="me-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"
                ><span class="ltr:inline rtl:hidden">&larr;</span
                ><span class="ltr:hidden rtl:inline">&rarr;</span></span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Meta Programming in Python</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2025-05-03 10:20:44 &#43;0200 CEST">3 May 2025</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

      </main>
      
        <div
          class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12"
          id="to-top"
          hidden="true"
        >
          <a
            href="#the-top"
            class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
            aria-label="Scroll to top"
            title="Scroll to top"
          >
            &uarr;
          </a>
        </div>
      <footer class="py-10 print:hidden">
  
  
  <div class="flex items-center justify-between">
    <div>
      
      
        <p class="text-sm text-neutral-500 dark:text-neutral-400">
            &copy;
            2025
            Sofia Fischer
        </p>
      
      
      
        <p class="text-xs text-neutral-500 dark:text-neutral-400">
          
          
          Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
            href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href="https://github.com/jpanther/congo" target="_blank" rel="noopener noreferrer">Congo</a>
        </p>
      
    </div>
    <div class="flex flex-row items-center">
      
      
      
      
        <div
          class="me-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        >
          <button id="appearance-switcher-0" type="button" aria-label="appearance switcher">
            <div
              class="flex h-12 w-12 items-center justify-center dark:hidden"
              title="Switch to dark appearance"
            >
              <span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
            </div>
            <div
              class="hidden h-12 w-12 items-center justify-center dark:flex"
              title="Switch to light appearance"
            >
              <span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
            </div>
          </button>
        </div>
      
    </div>
  </div>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="http://localhost:1313/"
>
  <div
    id="search-modal"
    class="top-20 mx-auto flex min-h-0 w-full max-w-3xl flex-col rounded-md border border-neutral-200 bg-neutral shadow-lg dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex flex-none items-center justify-between px-2">
      <form class="flex min-w-0 flex-auto items-center">
        <div class="flex h-8 w-8 items-center justify-center text-neutral-400">
          <span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
        </div>
        <input
          type="search"
          id="search-query"
          class="mx-1 flex h-12 flex-auto appearance-none bg-transparent focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex h-8 w-8 items-center justify-center text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)"
      >
        <span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </button>
    </header>
    <section class="flex-auto overflow-auto px-2">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
</html>
