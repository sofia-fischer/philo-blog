<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>About Actions, Jobs, Repositories, Events &#183; Philodev Blog</title><meta name=title content="About Actions, Jobs, Repositories, Events &#183; Philodev Blog"><meta name=description content="The thoughts and ideas of a Code Wizard about coding, development process and self improvement"><link rel=canonical href=https://www.blog.philodev.one/posts/2022-07-action-and-other-patterns/><link type=text/css rel=stylesheet href=/css/main.bundle.min.cf0f6eca403a2fd6e7ae1010eab20c223335118f1004bed139e13adcbfa24b62fab4fdfe32f2aeb59068ea5f021056a8db1cca1d49e150d0c51316745d78cb50.css integrity="sha512-zw9uykA6L9bnrhAQ6rIMIjM1EY8QBL7ROeE63L+iS2L6tP3+MvKutZBo6l8CEFao2xzKHUnhUNDFExZ0XXjLUA=="><script type=text/javascript src=/js/appearance.min.12e98742cd283574d030a7fe55f29597df4ee214f7ff7075b4d19a64d046a602753c715295550be7899b661619cec89c679049d36c624681671a8013c1249896.js integrity="sha512-EumHQs0oNXTQMKf+VfKVl99O4hT3/3B1tNGaZNBGpgJ1PHFSlVUL54mbZhYZzsicZ5BJ02xiRoFnGoATwSSYlg=="></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="About Actions, Jobs, Repositories, Events"><meta property="og:description" content="Simple REST APIs are nice. But once a Controller needs to perform more than the basic update, create, and index methods; Once a Controller maybe ought to handle multiple little tasks, tasks that may be used in various places in the code base, there is a need for a Software Pattern. Something that fulfills the desire to have one class or method do only one thing - Single Responsibility. This Post compares Repositories, Services, Actions, Jobs, and Events (and gives inspiration for piptes) - not to find the best for all use cases, but to formulate some words on the question when the different patterns offer advantages over the others."><meta property="og:type" content="article"><meta property="og:url" content="https://www.blog.philodev.one/posts/2022-07-action-and-other-patterns/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-31T14:20:44+02:00"><meta property="article:modified_time" content="2022-07-31T14:20:44+02:00"><meta property="og:site_name" content="Philodev Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="About Actions, Jobs, Repositories, Events"><meta name=twitter:description content="Simple REST APIs are nice. But once a Controller needs to perform more than the basic update, create, and index methods; Once a Controller maybe ought to handle multiple little tasks, tasks that may be used in various places in the code base, there is a need for a Software Pattern. Something that fulfills the desire to have one class or method do only one thing - Single Responsibility. This Post compares Repositories, Services, Actions, Jobs, and Events (and gives inspiration for piptes) - not to find the best for all use cases, but to formulate some words on the question when the different patterns offer advantages over the others."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"About Actions, Jobs, Repositories, Events","headline":"About Actions, Jobs, Repositories, Events","description":"Simple REST APIs are nice. But once a Controller needs to perform more than the basic update, create, and index methods; Once a Controller maybe ought to handle multiple little tasks, tasks that may be used in various places in the code base, there is a need for a Software Pattern. Something that fulfills the desire to have one class or method do only one thing - Single Responsibility. This Post compares Repositories, Services, Actions, Jobs, and Events (and gives inspiration for piptes) - not to find the best for all use cases, but to formulate some words on the question when the different patterns offer advantages over the others.","abstract":"Simple REST APIs are nice.","inLanguage":"en","url":"https:\/\/www.blog.philodev.one\/posts\/2022-07-action-and-other-patterns\/","author":{"@type":"Person","name":"Sofia Fischer"},"copyrightYear":"2022","dateCreated":"2022-07-31T14:20:44\u002b02:00","datePublished":"2022-07-31T14:20:44\u002b02:00","dateModified":"2022-07-31T14:20:44\u002b02:00","keywords":["Development","Laravel","Patterns","Single Responsibility","Repository Pattern","Service Pattern","Action Pattern","Jobs","Events","Pipeline Patter"],"mainEntityOfPage":"true","wordCount":"2220"}]</script><meta name=author content="Sofia Fischer"><link href=mailto:sofia@philodev.com rel=me><link href=https://www.philodev.one rel=me><link href=https://github.com/sofia-fischer rel=me><link href=https://www.linkedin.com/in/sofia-fischer-58b1611b9/ rel=me></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 dark:bg-neutral-600 focus:translate-y-0" href=#main-content><span class="font-bold ltr:pr-2 rtl:pl-2 text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="flex justify-between py-6 font-semibold sm:items-center sm:py-10 text-neutral-900 dark:text-neutral print:hidden"><div><a href=/><img src=/logo.png width=1012 height=1012 class="max-w-[10rem] max-h-[10rem] object-scale-down object-left" alt="Philodev Blog"></a></div><nav><ul class="flex flex-col list-none sm:flex-row"><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/posts/ title=Posts>Blog</a></li><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=https://www.philodev.one title>About Philodev</a></li><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>Tags</a></li></ul></nav></header><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header class=max-w-prose><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/>Philodev Blog</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/>Posts</a><span class="px-1 text-primary-500">/</span></li><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/2022-07-action-and-other-patterns/>About Actions, Jobs, Repositories, Events</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">About Actions, Jobs, Repositories, Events</h1><div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2022-07-31 14:20:44 +0200 CEST">31 July 2022</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">11 mins</span></div></div></header><section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert"><div class="order-first px-0 lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8 lg:order-last"><div class="ltr:pl-5 rtl:pr-5 toc lg:sticky lg:top-10 print:hidden"><details open class="mt-0 overflow-hidden rounded-lg rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 lg:mt-3"><summary class="block py-1 text-lg font-semibold cursor-pointer rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 text-neutral-800 dark:text-neutral-100 lg:hidden bg-neutral-100 dark:bg-neutral-700">Table of Contents</summary><div class="py-2 border-dotted ltr:border-l rtl:border-r rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 border-neutral-300 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><a href=#writing-a-controller-that>Writing a Controller that</a><ul><li><a href=#just-a-controller>Just a Controller</a></li><li><a href=#repository-pattern>Repository Pattern</a></li><li><a href=#service-pattern>Service Pattern</a></li><li><a href=#action-pattern>Action Pattern</a></li><li><a href=#using-jobs-for-action-pattern>Using Jobs for Action Pattern</a></li><li><a href=#event---listener-pattern>Event - Listener Pattern</a></li><li><a href=#pipeline-pattern>Pipeline Pattern</a></li></ul></li><li><a href=#so-what-now>So what now?</a></li></ul></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose"><div class="!mb-9 text-xl lead">Simple REST APIs are nice. But once a Controller needs to perform more than just the basic update, create,
and index methods; Once a Controller maybe ought to handle multiple little tasks, tasks that may be used in various
places in the code base, there is a need for a Software Pattern. Something that fulfills the desire to have one
class or method do only one thing - Single Responsibility. This Post compares Repositories, Services, Actions, Jobs, and
Events - not to find the best for all use cases, but to formulate some words on the question when the different patterns
offer advantages over the others.</div><h2 id=writing-a-controller-that class="relative group">Writing a Controller that <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#writing-a-controller-that aria-label=Anchor>#</a></span></h2><p>Taking my favorite example, <a href=https://round-robin.philodev.one/>Round Robin</a> - a little round-based gaming platform to
register and play games with friends. A new user just registered and already has a game token, so they can just join an
existing game. This means, within the request to (1) create that user, also a (2) player needs to be created, and (3)
that player must be configured e.g. become a member of a color-coded team.</p><div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"><span class="ltr:pr-3 rtl:pl-3 text-primary-400"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M506.3 417 293 53c-16.33-28-57.54-28-73.98.0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6c32.76.0 53.26-35 36.96-63zM232 168c0-13.25 10.75-24 24-24s24 10.8 24 24v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zm24 248c-17.36.0-31.44-14.08-31.44-31.44s14.07-31.44 31.44-31.44 31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg></span></span><span class=dark:text-neutral-300>Of course there are reasons to do some things using precisely one pattern (like sending an email using an event, or
updating using a repository). This blog is a collection to compare some patterns that want to move code from
the controller to different files. The example is used for visualisation, not because it is so hard to decide which
pattenr to use in this case</span></div><p><figure><img class="my-0 rounded-md" srcset="/images/2022-07-orchestrate_hu69853d2d7083dacb77a3b95547c332d7_953019_330x0_resize_box_3.png 330w,
/images/2022-07-orchestrate_hu69853d2d7083dacb77a3b95547c332d7_953019_660x0_resize_box_3.png 660w,
/images/2022-07-orchestrate_hu69853d2d7083dacb77a3b95547c332d7_953019_1024x0_resize_box_3.png 1024w,
/images/2022-07-orchestrate_hu69853d2d7083dacb77a3b95547c332d7_953019_1320x0_resize_box_3.png 2x" src=/images/2022-07-orchestrate_hu69853d2d7083dacb77a3b95547c332d7_953019_660x0_resize_box_3.png alt="Orchestrate - but how?"></figure></p><h3 id=just-a-controller class="relative group">Just a Controller <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#just-a-controller aria-label=Anchor>#</a></span></h3><p>For simplicity, let&rsquo;s assume all security validations have been made in the request by magic. The reason for this post
is that multiple things are ought to happen in this controller, some of those things are also happening in different
parts of the application, and I need to find a pattern to organize my code.</p><p>So using nothing but the Model View Controller pattern, I end up with this code:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserController</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>register</span><span class=p>(</span><span class=nx>Request</span> <span class=nv>$request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// step 1: create the user
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$user</span> <span class=o>=</span> <span class=nx>User</span><span class=o>::</span><span class=na>create</span><span class=p>(</span><span class=nv>$request</span><span class=o>-&gt;</span><span class=na>data</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=nx>Auth</span><span class=o>::</span><span class=na>login</span><span class=p>(</span><span class=nv>$user</span><span class=p>,</span> <span class=k>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span> <span class=nv>$request</span><span class=o>-&gt;</span><span class=na>input</span><span class=p>(</span><span class=s1>&#39;token&#39;</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>return</span> <span class=nx>view</span><span class=p>(</span><span class=s1>&#39;game.index&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>         <span class=c1>// step 2: Create the player
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$game</span> <span class=o>=</span> <span class=nx>Game</span><span class=o>::</span><span class=na>query</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;token&#39;</span><span class=p>,</span> <span class=nv>$request</span><span class=o>-&gt;</span><span class=na>input</span><span class=p>(</span><span class=s1>&#39;token&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=o>-&gt;</span><span class=na>firstOrFail</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=nv>$player</span> <span class=o>=</span> <span class=nv>$game</span><span class=o>-&gt;</span><span class=na>players</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>create</span><span class=p>([</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;uuid&#39;</span>    <span class=o>=&gt;</span> <span class=nx>Str</span><span class=o>::</span><span class=na>uuid</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;user_id&#39;</span> <span class=o>=&gt;</span> <span class=nx>Auth</span><span class=o>::</span><span class=na>id</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=p>]);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>         <span class=c1>// step 3: Prepare the Player for the game
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$redPlayers</span> <span class=o>=</span> <span class=nv>$game</span><span class=o>-&gt;</span><span class=na>players</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;color&#39;</span><span class=p>,</span> <span class=s1>&#39;red&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>count</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nv>$bluePlayers</span> <span class=o>=</span> <span class=nv>$game</span><span class=o>-&gt;</span><span class=na>players</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;color&#39;</span><span class=p>,</span> <span class=s1>&#39;blue&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>count</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nv>$player</span><span class=o>-&gt;</span><span class=na>color</span> <span class=o>=</span>   <span class=nv>$redPlayers</span> <span class=o>&gt;</span> <span class=nv>$bluePlayers</span> <span class=o>?</span> <span class=s1>&#39;blue&#39;</span> <span class=o>:</span> <span class=s1>&#39;red;&#39;</span>
</span></span><span class=line><span class=cl>        <span class=nv>$player</span><span class=o>-&gt;</span><span class=na>save</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>view</span><span class=p>(</span><span class=s1>&#39;GamePage&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;game&#39;</span> <span class=o>=&gt;</span> <span class=nv>$game</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Not very reusable&mldr; so let&rsquo;s have a look at the Laravel Docs and common Patterns to improve the situation.</p><h3 id=repository-pattern class="relative group">Repository Pattern <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#repository-pattern aria-label=Anchor>#</a></span></h3><p>If there was a layer between the Database and the Controller, something that handles the creation of models - wouldn&rsquo;t
that be nice? Using Dependency Injection of Laravel, you could follow such a pattern:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserController</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>register</span><span class=p>(</span><span class=nx>Request</span> <span class=nv>$request</span><span class=p>,</span> <span class=nx>UserRepository</span> <span class=nv>$userRepository</span><span class=p>,</span> <span class=nx>PlayerRepository</span> <span class=nv>$playerRepository</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// step 1: create the user
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$user</span> <span class=o>=</span> <span class=nv>$userRepository</span><span class=o>-&gt;</span><span class=na>createUser</span><span class=p>(</span><span class=nv>$request</span><span class=o>-&gt;</span><span class=na>data</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span> <span class=nv>$request</span><span class=o>-&gt;</span><span class=na>input</span><span class=p>(</span><span class=s1>&#39;token&#39;</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>return</span> <span class=nx>view</span><span class=p>(</span><span class=s1>&#39;game.index&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>         <span class=c1>// step 2: Create the player
</span></span></span><span class=line><span class=cl><span class=c1></span>         <span class=nv>$player</span> <span class=o>=</span> <span class=nv>$playerRepository</span><span class=o>-&gt;</span><span class=na>createPlayer</span><span class=p>([</span><span class=s1>&#39;token&#39;</span> <span class=o>=&gt;</span> <span class=nv>$request</span><span class=o>-&gt;</span><span class=na>input</span><span class=p>(</span><span class=s1>&#39;token&#39;</span><span class=p>)]);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>         <span class=c1>// step 3: Prepare the Player for the game
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$redPlayers</span> <span class=o>=</span> <span class=nv>$game</span><span class=o>-&gt;</span><span class=na>players</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;color&#39;</span><span class=p>,</span> <span class=s1>&#39;red&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>count</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nv>$bluePlayers</span> <span class=o>=</span> <span class=nv>$game</span><span class=o>-&gt;</span><span class=na>players</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>where</span><span class=p>(</span><span class=s1>&#39;color&#39;</span><span class=p>,</span> <span class=s1>&#39;blue&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>count</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nv>$player</span><span class=o>-&gt;</span><span class=na>color</span> <span class=o>=</span>   <span class=nv>$redPlayers</span> <span class=o>&gt;</span> <span class=nv>$bluePlayers</span> <span class=o>?</span> <span class=s1>&#39;blue&#39;</span> <span class=o>:</span> <span class=s1>&#39;red;&#39;</span>
</span></span><span class=line><span class=cl>        <span class=nv>$player</span><span class=o>-&gt;</span><span class=na>save</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>view</span><span class=p>(</span><span class=s1>&#39;GamePage&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;game&#39;</span> <span class=o>=&gt;</span> <span class=nv>$player</span><span class=o>-&gt;</span><span class=na>game</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The great thing about a Repository is, that it is the single point in the code base, that creates, updates, or queries
Models. There are a lot of use cases in which this can be super helpful - e.g. if you want to validate your Models
before updating or authorizing queries. The separation of the writing and reading part of a Repository can be achieved
by
using <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>. The Repository does a great deal for separation of concerns and single responsibility (
your software pattern bingo game should have caused one win by now).</p><p>But it can&rsquo;t solve all problems, as you can see the third step is not the job of the Repository. Arguably it could be
implemented there, as one can argue that the correct color of a player is somewhat a validation topic, but treating a
Repository like that will make it the &ldquo;core service&rdquo; of the application soon. It is not the job of the Repository to
care
about everything that occurs with the creation of a Model, it just cares about the creation of the Model.</p><h3 id=service-pattern class="relative group">Service Pattern <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#service-pattern aria-label=Anchor>#</a></span></h3><p>If there was a place to just hold all the methods that might be used multiple times - wouldn&rsquo;t that be nice? Mind that
this is not the Service Provider that Laravel mentions, at least I could not come up with a reason why a Service like
that would need to be registered or requires to be a singleton.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserController</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>register</span><span class=p>(</span><span class=nx>Request</span> <span class=nv>$request</span><span class=p>,</span> <span class=nx>UserService</span> <span class=nv>$userService</span><span class=p>,</span> <span class=nx>PlayerService</span> <span class=nv>$playerService</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// step 1: create the user
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$user</span> <span class=o>=</span> <span class=nv>$userService</span><span class=o>-&gt;</span><span class=na>register</span><span class=p>(</span><span class=nv>$request</span><span class=o>-&gt;</span><span class=na>data</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span> <span class=nv>$request</span><span class=o>-&gt;</span><span class=na>input</span><span class=p>(</span><span class=s1>&#39;token&#39;</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>return</span> <span class=nx>view</span><span class=p>(</span><span class=s1>&#39;game.index&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>         <span class=c1>// step 2: Create the player
</span></span></span><span class=line><span class=cl><span class=c1></span>         <span class=nv>$player</span> <span class=o>=</span> <span class=nv>$playerService</span><span class=o>-&gt;</span><span class=na>createPlayer</span><span class=p>(</span><span class=nv>$request</span><span class=o>-&gt;</span><span class=na>input</span><span class=p>(</span><span class=s1>&#39;token&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>         <span class=c1>// step 3: Prepare the Player for the game
</span></span></span><span class=line><span class=cl><span class=c1></span>         <span class=nv>$player</span> <span class=o>=</span> <span class=nv>$playerService</span><span class=o>-&gt;</span><span class=na>initatePlayer</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>view</span><span class=p>(</span><span class=s1>&#39;GamePage&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;game&#39;</span> <span class=o>=&gt;</span> <span class=nv>$player</span><span class=o>-&gt;</span><span class=na>game</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Feel the freedom of doing more than just creating and updating, listen to the single Responsibility Pattern softly
crying in the corner, and watch your services grow to reach the 4-digit line numbers! Services are a great way to
encapsulate logic around one component. In my experience, it is just hard to set boundaries, and in a larger application
(or one that can have the potential to grow) I would not use this pattern and go for something that gives the next
developer
who might continue on my code a stricter line on where to find and add code.</p><p>One additional note: there is no limit on patterns, Services and Repositories might work together quite well
and <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.</p><h3 id=action-pattern class="relative group">Action Pattern <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#action-pattern aria-label=Anchor>#</a></span></h3><p>If there was just one class, that does exactly the one thing, and may be reused in Controllers, Jobs, Commands,
whatever - wouldn&rsquo;t that be nice?</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserController</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>register</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>Request</span> <span class=nv>$request</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=nx>UserCreateAction</span> <span class=nv>$userCreateAction</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=nx>PlayerCreateAction</span> <span class=nv>$playerCreateAction</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=nx>PlayerInitialisationAction</span> <span class=nv>$playerInitialisationAction</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// step 1: create the user
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$userCreateAction</span><span class=o>-&gt;</span><span class=na>execute</span><span class=p>(</span><span class=nv>$request</span><span class=o>-&gt;</span><span class=na>data</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span> <span class=nv>$request</span><span class=o>-&gt;</span><span class=na>input</span><span class=p>(</span><span class=s1>&#39;token&#39;</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>return</span> <span class=nx>view</span><span class=p>(</span><span class=s1>&#39;game.index&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>         <span class=c1>// step 2: Create the player
</span></span></span><span class=line><span class=cl><span class=c1></span>         <span class=nv>$playerCreateAction</span><span class=o>-&gt;</span><span class=na>exectue</span><span class=p>(</span><span class=nx>token</span><span class=o>:</span> <span class=nv>$request</span><span class=o>-&gt;</span><span class=na>input</span><span class=p>(</span><span class=s1>&#39;token&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>         <span class=c1>// step 3: Prepare the Player for the game
</span></span></span><span class=line><span class=cl><span class=c1></span>         <span class=nv>$playerInitialisationAction</span><span class=o>-&gt;</span><span class=na>exectue</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// imagine there is a custom Auth Facade extending the Auth Facade ...
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=nx>view</span><span class=p>(</span><span class=s1>&#39;GamePage&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;game&#39;</span> <span class=o>=&gt;</span> <span class=nx>Auth</span><span class=o>::</span><span class=na>player</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>game</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>One Action, one class per action, one concern per class - everything is separated and clean. Using this pattern can lead
to very clean actions, that can be inside of Controllers as well as Jobs as well as Nova Actions. Every bit of the
Business Logic broken down into simple pieces. And the single Actions are just so easy to test - some unit tests per
Action will increase the Test coverage fast and if all the little gears are working half the bugs are avoided. And then
you can just avoid using Events at all, because using the right packages will enable your actions to run on
queue <sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>.</p><p>This pattern is the reason for this post. I am working with this pattern for some months now and have to admit, it is
neat. Combined with some naming convention (spare some fuzz, suffix your actions with &lsquo;Action&rsquo; from the very
beginning&mldr; and while you are at it, just suffix everything that is not a Model).</p><p>I still have my concerns: While the Project grows, so first and for most your <code>/actions</code> folder grows, there is one
feature of Actions that I see as the biggest pro and con. Compared to Events, which are created, put on queue, and in
some ballet of Laravel Magic listened to at some point; Actions stay controllable. The Controller, or what ever point of
execution is calling the Actions like a conductor is flicking their want to initiate a calculated, controlled set of
actions. In a lot of use cases, this is a great tool of control - in others the freedom of hooking in between and after
any of those actions can be integrating, sometimes even necessary. Following the Action Pattern, such add-a-hook changes
can be frustrating to implement as each conductor has to follow the new life cycle, instead of having one place in which
such a life cycle event may be added.</p><h3 id=using-jobs-for-action-pattern class="relative group">Using Jobs for Action Pattern <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#using-jobs-for-action-pattern aria-label=Anchor>#</a></span></h3><p>This little question bugged me after discussing the topic with some colleagues. Why use Actions, if they could be Jobs?
Why not use the Framework that we Artisans admire, and just take the Jobs, may or may not make it Dispatchable or /
and Queueable and just use those as queueable actions without any package dependency? All the special features of Jobs,
like rerunning on error, or unique running could come in super handy.</p><p>It is like taking a sledgehammer to crack a nut, but starting a Job should not be that much of a time spent,
especially if it is not Queueable anyway. One drawback for sure is the missing option to return something from your
action, which I would argue is a bit of code smell anyway.</p><p>Honest answer to this section: No idea, would love to try, if you have a comment on that - please email me, I would
appreciate the discussion!</p><h3 id=event---listener-pattern class="relative group">Event - Listener Pattern <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#event---listener-pattern aria-label=Anchor>#</a></span></h3><p>If we could just state what happened in the Controller, everything that wants to react to the thing that happened can
do so - wouldn&rsquo;t that be nice?</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserController</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>register</span><span class=p>(</span><span class=nx>Request</span> <span class=nv>$request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// step 1: create the user
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$user</span> <span class=o>=</span> <span class=nx>User</span><span class=o>::</span><span class=na>create</span><span class=p>(</span><span class=nv>$request</span><span class=o>-&gt;</span><span class=na>data</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=nx>Auth</span><span class=o>::</span><span class=na>login</span><span class=p>(</span><span class=nv>$user</span><span class=p>,</span> <span class=k>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>UserCreated</span><span class=o>::</span><span class=na>dispatch</span><span class=p>(</span><span class=nv>$user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>view</span><span class=p>(</span><span class=s1>&#39;GamePage&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;game&#39;</span> <span class=o>=&gt;</span> <span class=nx>Auth</span><span class=o>::</span><span class=na>player</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>game</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// In the Event Service Provider
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>protected</span> <span class=nv>$listen</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=nx>UserCreated</span><span class=o>::</span><span class=na>class</span> <span class=o>=&gt;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=c1>// step 2: Create the player
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>CreatePlayerIfTokenIsPresent</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nx>PlayerCreated</span><span class=o>::</span><span class=na>class</span> <span class=o>=&gt;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=c1>// step 3: Prepare the Player for the game
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>InitiatePlayer</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>];</span>
</span></span></code></pre></div><p>So little code&mldr; so clean, almost no newbie will know where to find everything, but a Laravel affine Developer might
look at the Service Provider (that might be one of many Service Providers, e.g. one for each Domain), and see how Data
might flow through the Application in a barely controllable way once the event has been dispatched.</p><p>This is the pattern of choice if your tasks should run on Queue, but any listener that misses
the <code>implements ShouldQueue</code> (which can be expressed by an empty Interface <code>Should RunImmediately</code>) is not queued at
all, but will be executed in the old PHP line by line fashion - like an Action. So Events come with most of the Benefits
of Actions, Testability, Single Responsibility; but introduce their own set of drawbacks. They are way harder to parse
in mind, can hard to follow through multiple layers of events, and are even harder to test in combination than Actions.</p><p>If you want to offer some frustrating learning experiences for Developers new to the code, Silent <sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>
are
using the same pattern and will listen for Model Events that are thrown automatically (this is the reason there is
a <code>$user->saveQuietly()</code> method).</p><h3 id=pipeline-pattern class="relative group">Pipeline Pattern <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#pipeline-pattern aria-label=Anchor>#</a></span></h3><p>If the steps that need to be performed are just running through a pre-defined set of classes - wouldn&rsquo;t that be nice?</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserController</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>register</span><span class=p>(</span><span class=nx>Request</span> <span class=nv>$request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>        
</span></span><span class=line><span class=cl>        <span class=nv>$player</span> <span class=o>=</span> <span class=nx>app</span><span class=p>(</span><span class=nx>Pipeline</span><span class=o>::</span><span class=na>class</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=o>-&gt;</span><span class=na>send</span><span class=p>(</span><span class=nv>$request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=o>-&gt;</span><span class=na>through</span><span class=p>([</span>
</span></span><span class=line><span class=cl>                <span class=c1>// step 1: create the user
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=nx>\App\Pipes\CreateUser</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=c1>// step 2: Create the player
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=nx>\App\Pipes\CreatePlayer</span><span class=o>::</span><span class=na>class</span>
</span></span><span class=line><span class=cl>                <span class=c1>// step 3: Prepare the Player for the game
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=nx>\App\Pipes\InitatePlayer</span><span class=o>::</span><span class=na>class</span>
</span></span><span class=line><span class=cl>            <span class=p>])</span>
</span></span><span class=line><span class=cl>            <span class=o>-&gt;</span><span class=na>thenReturn</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=o>-&gt;</span><span class=na>get</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span> <span class=nv>$player</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>return</span> <span class=nx>view</span><span class=p>(</span><span class=s1>&#39;game.index&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>view</span><span class=p>(</span><span class=s1>&#39;GamePage&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;game&#39;</span> <span class=o>=&gt;</span> <span class=nv>$player</span><span class=o>-&gt;</span><span class=na>game</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>This would be where I would state my experiences, advantages when designing, drawbacks on production - If I had any
experience. Looking forward to someday building a pipeline pattern. If I ever do, I might come back here to update the
post ;) However, I can give you some <sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup> on where to start understanding the pattern for yourself.</p><h2 id=so-what-now class="relative group">So what now? <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#so-what-now aria-label=Anchor>#</a></span></h2><p>The answer to the question &ldquo;What pattern should I use?&rdquo; is the same as for so many other questions in life: &ldquo;it
depends&mldr;&rdquo;. Every Pattern offers drawbacks, and every pattern has use cases in which it shines with all its advantages.
In every use case there will be developers arguing there was a better pattern anyway, and some will see the bright
side of the architect&rsquo;s decision. For some over-the-thump-rules:</p><ul><li>One single point in the app that stores Models? Repository Pattern</li><li>Only need a bunch of methods to be reusable? Service Pattern</li><li>A lot of reusable Code snippets that work very reliable? Action Pattern</li><li>Something that may happen on the queue? Event Listener Pattern</li><li>Wanna build something creative and tell me how it went? Pipeline Pattern</li><li>Multiple things of the above? Use multiple patterns</li></ul><p>If you have more Patterns, or disagree with my opinion, feel free to send me some feedback. I am not the only one how
had this idea, so check out what other people think too <sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup>.</p><p>Happy Coding Everyone :)</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://www.blog.philodev.one/posts/2022-05-custom-query-builder-pattern/>This Post</a> offers
some examples and sources&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://stackoverflow.com/questions/57363816/is-it-okey-to-call-events-from-repository-pattern-in-laravel>Here</a>
is an example from Stack Overflow in which this is elaborated&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://lorisleiva.com/why-i-wrote-laravel-actions>Here</a> is one of the many Action favorable Posts. I
learned the pattern using the book &ldquo;Laravel beyond CRUD&rdquo;.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://laravel.com/docs/9.x/eloquent#observers>Laravel Docs</a> for more information&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p><a href=https://dev.to/abrardev99/pipeline-pattern-in-laravel-278p>A Tutorial</a> to understand the
basics, <a href=https://laravel.com/api/8.x/Illuminate/Pipeline/Pipeline.html>the Pipeline Docs</a>, and
an <a href=https://www.blog.philodev.one/posts/2022-06-customer-search/#how-does-a-request-live-through-laravel>example of the Pipeline Pattern</a>
in Laravels Middleware Handling.&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6><p><a href=https://laravel-news.com/controller-refactor>This blog</a> did similar things to refactor a controller
in multiple ways.&#160;<a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></section><footer class="pt-8 max-w-prose print:hidden"><div class=flex><div class=place-self-center><div class="text-[0.6rem] leading-3 text-neutral-500 dark:text-neutral-400 uppercase">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Sofia Fischer</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=mailto:sofia@philodev.com target=_blank aria-label=Email rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://www.philodev.one target=_blank aria-label=Link rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentcolor" d="M172.5 131.1c55.6-55.59 148-55.59 203.6.0 50 50 57.4 129.7 16.3 187.2L391.3 319.9C381 334.2 361 337.6 346.7 327.3c-14.4-10.3-17.8-30.3-7.5-44.6L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2c-31.4-31.4-82.5-31.4-114 0L105.5 289.5c-31.51 30.6-31.51 82.5.0 114C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4 265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2c-58.4 41.1-136.3 34.5-186.29-15.4-56.469-56.5-56.469-148.1.0-204.5L172.5 131.1zM467.5 380c-56.5 56.5-148 56.5-204.5.0-50-50-56.5-128.8-15.4-186.3L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7 307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8c31.4 31.4 82.5 31.4 114 0L534.5 222.5c31.5-31.5 31.5-83.4.0-114C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58 374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24c56.5 56.46 56.5 148.06.0 204.46L467.5 380z"/></svg></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/sofia-fischer target=_blank aria-label=Github rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://www.linkedin.com/in/sofia-fischer-58b1611b9/ target=_blank aria-label=Linkedin rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></a></div></div></div></div><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group" href=/posts/2022-06-customer-search/><span class="mr-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Technical Job Interview questions 2022</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2022-06-02 14:20:44 +0200 CEST">2 June 2022</time></span></span></a></span>
<span></span></div></div></footer></article><div class="absolute top-[110vh] ltr:right-0 rtl:left-0 w-12 pointer-events-none bottom-0"><a href=#the-top class="w-12 h-12 sticky pointer-events-auto top-[calc(100vh-5.5rem)] bg-neutral/50 dark:bg-neutral-800/50 backdrop-blur rounded-full text-xl flex items-center justify-center text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer class="py-10 print:hidden"><div class="flex justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2022
Sofia Fischer</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://git.io/hugo-congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="text-sm cursor-pointer text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-14 rtl:ml-14"><button id=appearance-switcher class="w-12 h-12" type=button title="Switch to dark appearance">
<span class="inline dark:hidden"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></span><span class="hidden dark:inline"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></span></button></div></div></footer></div></body></html>