<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#FFFFFF"><title>Book takeaways: Building Evolutionary Architecture &#183; PhiloBlog</title>
<meta name=title content="Book takeaways: Building Evolutionary Architecture &#183; PhiloBlog"><script type=text/javascript src=/js/appearance.min.8a082f81b27f3cb2ee528df0b0bdc39787034cf2cc34d4669fbc9977c929023c.js integrity="sha256-iggvgbJ/PLLuUo3wsL3Dl4cDTPLMNNRmn7yZd8kpAjw="></script><link type=text/css rel=stylesheet href=/css/main.bundle.min.cd65e744f39f2e1530fc9baa021748abbe422c38751e5618d85bc544b7eae4c1.css integrity="sha256-zWXnRPOfLhUw/JuqAhdIq75CLDh1HlYY2FvFRLfq5ME="><meta name=description content="
      With evolving requirements and knowledge about the product, the architecture must evolve as well. This book provides an explanation of the concept, examples of fitness functions for architectures, and recommendations on how to build incrementally.
    "><link rel=canonical href=https://www.blog.philodev.one/posts/2024-09-evolutionary-architecture/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://www.blog.philodev.one/posts/2024-09-evolutionary-architecture/"><meta property="og:site_name" content="PhiloBlog"><meta property="og:title" content="Book takeaways: Building Evolutionary Architecture"><meta property="og:description" content="With evolving requirements and knowledge about the product, the architecture must evolve as well. This book provides an explanation of the concept, examples of fitness functions for architectures, and recommendations on how to build incrementally."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-27T10:20:44+02:00"><meta property="article:modified_time" content="2024-09-27T10:20:44+02:00"><meta property="article:tag" content="Book"><meta property="article:tag" content="Architecture"><meta property="article:tag" content="Metrics"><meta property="article:tag" content="Development"><meta name=twitter:card content="summary"><meta name=twitter:title content="Book takeaways: Building Evolutionary Architecture"><meta name=twitter:description content="With evolving requirements and knowledge about the product, the architecture must evolve as well. This book provides an explanation of the concept, examples of fitness functions for architectures, and recommendations on how to build incrementally."><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Book takeaways: Building Evolutionary Architecture","headline":"Book takeaways: Building Evolutionary Architecture","description":"With evolving requirements and knowledge about the product, the architecture must evolve as well. This book provides an explanation of the concept, examples of fitness functions for architectures, and recommendations on how to build incrementally.","inLanguage":"en","url":"https:\/\/www.blog.philodev.one\/posts\/2024-09-evolutionary-architecture\/","author":{"@type":"Person","name":"Sofia Fischer"},"copyrightYear":"2024","dateCreated":"2024-09-27T10:20:44\u002b02:00","datePublished":"2024-09-27T10:20:44\u002b02:00","dateModified":"2024-09-27T10:20:44\u002b02:00","keywords":["Book","Architecture","Metrics","Development"],"mainEntityOfPage":"true","wordCount":"2779"}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://www.blog.philodev.one/","name":"Philo Blog","position":1},{"@type":"ListItem","item":"https://www.blog.philodev.one/posts/","name":"Posts","position":2},{"@type":"ListItem","name":"Book Takeaways Building Evolutionary Architecture","position":3}]}</script><meta name=author content="Sofia Fischer"><link href=mailto:sofia@philodev.com rel=me><link href=https://github.com/sofia-fischer rel=me><link href=https://www.linkedin.com/in/sofia-fischer-58b1611b9/ rel=me></head><body class="m-auto flex h-screen max-w-7xl flex-col bg-neutral px-6 text-lg leading-7 text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="-translate-y-8 rounded-b-lg bg-primary-200 px-3 py-1 text-sm focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="pe-2 font-bold text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral sm:py-10 print:hidden"><nav class="flex items-start justify-between sm:items-center"><div class="flex flex-row items-center"><a href=/ class=mr-2><img src=/logo.png width=1012 height=1012 class="max-h-[10rem] max-w-[10rem] object-scale-down object-left" alt=PhiloBlog>
</a><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>PhiloBlog</a></div><ul class="flex list-none flex-col text-end sm:flex-row"><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=/posts/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Posts</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=/tags/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Tags</span></a></li></ul></nav></header><div class="relative flex grow flex-col"><main id=main-content class=grow><article><header class=max-w-prose><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="hidden inline"><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/>PhiloBlog</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/posts/>Posts</a><span class="px-1 text-primary-500">/</span></li><li class="hidden inline"><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/posts/2024-09-evolutionary-architecture/>Book takeaways: Building Evolutionary Architecture</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mb-8 mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Book takeaways: Building Evolutionary Architecture</h1><div class="mb-10 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2024-09-27 10:20:44 +0200 CEST">27 September 2024</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">14 mins</span></div><div class="my-1 flex flex-wrap text-xs leading-relaxed text-neutral-500 dark:text-neutral-400"><a href=/tags/book/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Book</a>
<a href=/tags/architecture/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Architecture</a>
<a href=/tags/metrics/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Metrics</a>
<a href=/tags/development/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Development</a></div></div></header><section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row"><div class="order-first px-0 lg:order-last lg:max-w-xs lg:ps-8"><div class="toc pe-5 lg:sticky lg:top-10 print:hidden"><details open class="-ms-5 mt-0 overflow-hidden rounded-lg ps-5"><summary class="block cursor-pointer bg-neutral-100 py-1 ps-5 text-lg font-semibold text-neutral-800 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="border-s border-dotted border-neutral-300 py-2 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><a href=#evolutionary-architecture>Evolutionary Architecture</a></li><li><a href=#mechanics>Mechanics</a><ul><li><a href=#architecture-characteristics>Architecture Characteristics</a></li><li><a href=#fitness-functions>Fitness Functions</a></li><li><a href=#examples-of-fitness-functions>Examples of Fitness functions</a></li></ul></li><li><a href=#structure>Structure</a><ul><li><a href=#connascence>Connascence</a></li><li><a href=#architectural-quantum>Architectural Quantum</a></li><li><a href=#orthogonal-coupling>Orthogonal Coupling</a></li><li><a href=#evolutionary-data>Evolutionary Data</a></li></ul></li><li><a href=#my-opinion>My Opinion</a></li></ul></li></ul></nav></div></details></div></div><div class="min-h-0 min-w-0 max-w-prose grow"><div class="lead !mb-9 text-xl">Building Evolutionary Architectures
Neal Ford, Rebecca Parsons, Patrick Kua, and Pramod Sadalage.</div><div class="flex rounded-md bg-primary-100 px-4 py-3 dark:bg-primary-900"><span class="pe-3 text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg>
</span></span><span class=dark:text-neutral-300><p><strong>Expectation Management</strong> : This blog post reflects my personal takeaways from the book. Chapters that I did not find
interesting or relevant to my work are not covered, chapters that particularly resonated with me are covered in more
detail. In between I added information I found useful to understand the context of the book.</p><p>I will add personal opinion and context in these alerts.</p></span></div><h2 id=evolutionary-architecture class="relative group">Evolutionary Architecture <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#evolutionary-architecture aria-label=Anchor>#</a></span></h2><p>Evolutionary Algorithms are used for optimization problems, where the search space is too large to be searched.
Inspired by biological evolution, the algorithm uses a population of (more or less random) solutions, and evolves them
over generations. The algorithms utilise a fitness function to evaluate the solutions. the solutions are then modified
by (more or less random) mutations to generate a new population. The generations will be selected and mutated over time
to localise local optimums.</p><div class="flex rounded-md bg-primary-100 px-4 py-3 dark:bg-primary-900"><span class="pe-3 text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg>
</span></span><span class=dark:text-neutral-300>While the concept and the term fitness function are very helpful in when dealing with architecture, I would like to
think about the limitations. Small mutations may be costly on architectures, architecture mutations should not be
random, but rather by decision and therefore understandable and traceable.
Architecture is not only a way of optimising component dependencies, but also a way of communicating guidelines to
developers and imply limitations to the product.
Architects sometimes focus more on the restrictions of developers and communicate through long wiki pages instead of
providing guidance and expectations.
I want to emphasize that the concept of Evolutionary Architecture can be a great tool for communicating the boundaries
and reasons for architectural decisions, but it can also be misused to enforce restrictions on developers, especially if
the fitness functions are written in a way that do not provide the needed context and reason for failure.</span></div><h2 id=mechanics class="relative group">Mechanics <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#mechanics aria-label=Anchor>#</a></span></h2><p>The mechanics of Evolutionary Architecture are covering fitness functions, as well as practices, metrics, and tools that
support architectural governance.
These mechanics are a tool for architects to guide teams in their architectural decision-making.
Architects are not supposed to sit in their ivory tower, controlling all projects by code reviews or designing hard to
change architecture to enforce their ideas.
Fitness functions are a way to communicate the architectural guidelines and expectations to the developers, and to
ensure that the architecture evolves in the right direction. From developers perspective, fitness functions should feel
like checklists, not annoying restriction.</p><h3 id=architecture-characteristics class="relative group">Architecture Characteristics <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#architecture-characteristics aria-label=Anchor>#</a></span></h3><p>Software solutions should fulfill the requirements of the product. Defining these requirements is something I wrote
about in a previous blog post about <a href=https://www.blog.philodev.one/posts/2024-05-agile-architecture/>Agile Architecture</a>.
These architecture characteristics represent critical requirements for the success and maintainability of the product.
The common characteristics in the book include Auditability, Performance, Security, Requirements, Data, Legality,
Scalability.</p><p>Although architecture characteristics should be defined in the beginning of a project, and used to design an
architecture that can evolve in the required dimensions of the characteristics. As the business requirements evolve over
time the architectural characteristics utilizes fitness functions to project the quality and evolvability of the
architecture.</p><blockquote><p>“Decide early what the objective drivers are and prioritize decisions accordingly.”</p></blockquote><p>In an agile development environment, many decisions are made incrementally, so should not all architecture decisions be
made upfront, but at the <em>last responsible moment</em>. Decisions should bring benefits to the current product, and should
therfore be sacrificial in the possible future of the product.</p><div class="flex rounded-md bg-primary-100 px-4 py-3 dark:bg-primary-900"><span class="pe-3 text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg>
</span></span><span class=dark:text-neutral-300><p>One of the most important characteristics of an architecture (in my opinion) is <em>testability</em>. An easily testable
system often comes already with its own set of fitness functions.</p><p>Testable systems have components that can be tested individually, might use contract testing to conform to outside
expectations, have easy fakable data structures, and provide separations of ports and adapters to test a complete flow.
A system that is easily testable for a developer is often also easier to understand and maintain.</p></span></div><h3 id=fitness-functions class="relative group">Fitness Functions <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#fitness-functions aria-label=Anchor>#</a></span></h3><blockquote><p>“An architectural fitness function is any mechanism that provides an objective integrity assessment of some
architectural characteristic(s).”</p></blockquote><p>Fitness functions in practice make take the form of:</p><ul><li>Architecture tests that run against the current implementation to check for architectural definitions, e.g. that
certain components are not dependent on each other to ensure <em>maintainability</em>.</li><li>Monitoring tools that measure e.g. the response time of a service to ensure <em>performance</em>.</li><li>Code Metrics that check things like cyclomatic complexity to ensure <em>maintainability</em>.</li><li>Chaos Engineering that tests the <em>resilience</em> of the system.</li><li>Security Scanning that check for vulnerabilities to ensure <em>security</em>.</li><li>Contract tests ensure <em>requirements</em> are met.</li></ul><p>These functions allow a feedback cycle for architecture decisions. A new deployment may be evaluated for its effects on
the architecture fitness functions. As Continuous Deliver strives for data driven results, architecture decisions can
evolve data-driven with the product.</p><p>Fitness function may have different characteristics:</p><p><strong>Atomic or Holistic</strong> : Atomic fitness functions are focused on a single context and aspect of the
architecture, like an architecture test that checks for dependencies between components.
Holistic fitness run against shared contexts and for example measure the response time throughout contexts.</p><p><strong>Triggered or Continual or Temporal or Manual</strong> :
Triggered fitness functions are run triggered like an architecture test, most common in the deployment or merge
pipeline.
Continual fitness functions are run continuously like a monitoring tool.
Temporal fitness functions run in defined time frames, like a reminder for a static key rotation or dependency check to
alert on outdated libraries.
Manual fitness functions are run by humans, like a QA review.</p><div class="flex rounded-md bg-primary-100 px-4 py-3 dark:bg-primary-900"><span class="pe-3 text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg>
</span></span><span class=dark:text-neutral-300>In this context, Monitor Driven Development is mentioned, and seems like something I need to look into! [^mdd]</span></div><p><strong>Static or Dynamic results</strong> : Static fitness functions have fixed results like a passed or failed test.
Dynamic fitness functions rely on the context like the response time of a service with increasing numbers of users.</p><p><strong>Intentional or Emerged</strong> :
Intentional fitness functions are defined upfront to project the architecture characteristics.
Emerged fitness functions are defined when a behavior is observed during product development.</p><h3 id=examples-of-fitness-functions class="relative group">Examples of Fitness functions <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#examples-of-fitness-functions aria-label=Anchor>#</a></span></h3><p>There are libraries for many programming languages that can be used to define fitness functions. Some of those must be
precisely defined for the domain, others are more general and can be used in many contexts.</p><ul><li><strong>Afferent and Efferent Coupling</strong> : Afferent Coupling measures the number incoming connections to a code artifact (
components, class, etc.), while Efferent Coupling measures the number of outgoing connections. These Couplings are
should be limited to make the code easy to understand (with all side effects), enable easy testing and if needed easy
replacement of the code artifact.</li></ul><pre tabindex=0><code class=language-injectablephp data-lang=injectablephp>$afferentCoupling = count($incomingConnections);
$efferentCoupling = count($outgoingConnections);
</code></pre><ul><li><strong>Abstractness</strong> : The ratio of abstract classes to concrete classes in a package.</li></ul><pre tabindex=0><code class=language-injectablephp data-lang=injectablephp>$abstractness = count($abstractClasses) / count($concreteClasses + $abstractClasses);
</code></pre><ul><li><strong>Instability</strong> : The ratio of efferent coupling to the total coupling. Higher instability means the code is more
likely to break if a small portion of it is changed. If a component is changed, the number of resulting, potential
code changes grows with the instability. On the other hand, a component with low instability is reused more.</li></ul><pre tabindex=0><code class=language-injectablephp data-lang=injectablephp>$instability = $efferentCoupling / ($efferentCoupling + $afferentCoupling);
</code></pre><ul><li><strong>Distance from the Main Sequence</strong> : Combines the abstractness and instability. A codebase that is too abstract
becomes difficult to understand and use, while a codebase that is too concrete becomes difficult to change.</li></ul><pre tabindex=0><code class=language-injectablephp data-lang=injectablephp>$distanceFromMainSequence = abs($abstractness + $instability - 1);
</code></pre><ul><li><p><strong>Direction of Imports</strong> : It might an architectural decision to let certain components only import from other
components, but not the other way around. This can be enforced by a fitness function.</p></li><li><p><strong>Cyclomatic Complexity</strong> : The number of independent paths through a code artifact. The metric is taken from graph
theory and takes the lines of code as edges and the number of decision points (like <code>if</code> or <code>switch</code>) as
the nodes. By this measure a formatted if-else statement in php will generate a complexity of 5 - 1 + 2 = 6, while a
turnery operator will generate a complexity of 1 - 1 + 2 = 2.
High cyclomatic complexity makes the code hard to understand and test.
The industry threshold is value below 10 for complex domains, and below 5 for simple domains.</p></li></ul><pre tabindex=0><code class=language-injectablephp data-lang=injectablephp>$cyclomaticComplexity = count($linesOfCode) - count($decisionsPoints) + 2;
</code></pre><ul><li><p><strong>Communication Governance</strong> : Defining which services are allowed to communicate with each other withing which
contracts. Services like PACT may be used to define and test these contracts, but additional fitness functions may be
required to ensure that services without a contract are not allowed to communicate.</p></li><li><p><strong>Chaos Engineering</strong> : The practice of testing the resilience of a system by injecting failures, such as high
latency, packet loss, whole services or databases going down. Chaos Engineering is a practice that is used to ensure
that the system is resilient. Netflix is a well-known company that uses Chaos Engineering continuously to ensure
developers take care of the resilience of their services.</p></li><li><p><strong>Fidelity Fitness</strong> : If a service is replaced by another service, the new service should have the same fidelity as
the old service. A fidelity fitness function may compare both services side by side to measure to which degree the new
service has the same feature set, results, or performance.</p></li></ul><h2 id=structure class="relative group">Structure <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#structure aria-label=Anchor>#</a></span></h2><p>The topology of the software system has a significant impact on the ability to evolve it.</p><h3 id=connascence class="relative group">Connascence <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#connascence aria-label=Anchor>#</a></span></h3><blockquote><p>“Two components are connascent if a change in one would require the other to be modified in order to maintain the
overall correctness of the system.”</p></blockquote><p>Connascence is a measure of the coupling between components. Different types of Connascence are more desirable than
other, the order of desirability listed here from most strong to weak.</p><p>Static Connascence is a measure of the coupling between components on code level, so on what two code artifacts must
agree on to function correctly.</p><ul><li><strong>Connascence of Name</strong> : Multiple components must agree on the name of an entity.</li><li><strong>Connascence of Type</strong> : Multiple components must agree on the type of entity.</li><li><strong>Connascence of Meaning</strong> : Multiple components must agree on the meaning of particular values, like enums.</li><li><strong>Connascence of Position</strong> : Multiple components must agree on the position of a value, like the order of parameters
in a function.</li></ul><p>Dynamic Connascence is a measure of the coupling between components on runtime level.</p><ul><li><strong>Connascence of Execution</strong> : Multiple components must agree on the order of execution, like adding a header before
dispatching a message is a connascence between a messenger component and business code.</li><li><strong>Connascence of Timing</strong> : If the timing of execution is important, to avoid for example race conditions.</li><li><strong>Connascence of Value</strong> : If certain values relate to one another to maintain the integrity of the datastructures.</li><li><strong>Connascence of Identity</strong> : If the identity of an entity must be the same in multiple components.</li></ul><p>The Locality of Connascence describes the proximal location to one another in the codebase. As the distance decreases
weaker forms of connascence can be used. Domain Driven Design uses the concept of Bounded Contexts to recognize that
each entity works within a localized context, implying strong connascence within the context and weak connascence
between contexts.</p><p>The Degree of Connascence describes the size of impact. A connaissance of type has less impact on a softwaresystem if it
used a normalisation / anti corruption layer to not drag type changes of the other system through it.</p><p>The Book provides guidlines from Page-Jones for using connascence to improve systems modularity:</p><ul><li>Minimize overall connascence by breaking the system into encapsulated elements.</li><li>Minimize any remaining connascence that crosses encapsulation boundaries.</li><li>Maximize the connascence within encapsulation boundaries.</li></ul><h3 id=architectural-quantum class="relative group">Architectural Quantum <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#architectural-quantum aria-label=Anchor>#</a></span></h3><blockquote><p>“An architectural quantum is an independently deployable component with high functional cohesion, high static
coupling, which includes all the structural elements required for the system to function properly.”</p></blockquote><p>Independently deployable means that the component can be deployed without the need to deploy other components.
High static coupling refers how services are wired together (in contrast to dynamic coupling, which refers to how
services call one another at run time).
High functional cohesion means it includes all behavior and data to implement a particular domain workflow.</p><p>The common example of an architectural quantum is a microservice. Any system that uses a shared database is one
architectural quantum, even if that database is an event storage. High degrees of decoupling into architectural quanta
allows developers to move quickly without being concert about the other services.</p><p>Dynamic coupling in quanta is a question of communication (sync or async), (eventual) consistency, and coordination (
orchestrator vs. choreographer).</p><h3 id=orthogonal-coupling class="relative group">Orthogonal Coupling <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#orthogonal-coupling aria-label=Anchor>#</a></span></h3><blockquote><p>“Two parts of an architecture may be orthogonally coupled if they serve two distinct purposes that still
intersect to form a complete solution”</p></blockquote><p>An example of such orthogonal coupling would be a service that is responsible for the business logic and a service that
is responsible for monitoring the requests.</p><div class="flex rounded-md bg-primary-100 px-4 py-3 dark:bg-primary-900"><span class="pe-3 text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg>
</span></span><span class=dark:text-neutral-300><p>I mark many things here as my opinion, as I am not sure if I got the concepts of the book correctly, and asked for help,
but found the answers worth noting down my learnings, even if they might differ from the book.</p><p>Moving the orthogonal coupling to the Kubernetes world, both services would be containers in one pod.
A pod is a small deployable unit in Kubernetes. It is a group of one or more containers,
each container may be defined as Docker Image. The containers in a pod share the same network (the same IP Address) and
storage. The containers in a pod are always deployed together.</p><p>Containers that might run in the same pod are for example logging services, or a nginx reverse proxy.
The database is often handled differently, to scale it independently and avoid data loss when their service is
restarted. Only containers are in one pod if they scale together and should exist for each deployment (not application).</p><p>Following the concept of orthogonal coupling, any two containers in one pod might be orthogonal coupled.</p></span></div><p>This is a concept connected to the Side Car Pattern, in which an application has a service as &ldquo;side-car&rdquo; that is managed
more centralized e.g. by the platform team.</p><div class="flex rounded-md bg-primary-100 px-4 py-3 dark:bg-primary-900"><span class="pe-3 text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg>
</span></span><span class=dark:text-neutral-300><p>If each pod has a side-car responsible for request handling (in php world for example a nginx), this allows to move
authorization to the side-car completely. Any request in and out of the pod would go through the side-car, so
any tokens can be added or checked in this service. This is a Service Mesh.</p><p>If all requests go through this service, it can be used gain monitoring data from the requests, resulting in a map of
requests between all pods in the company as well as to or from the outside. This enables many for example the fitness
function that tests which services are allowed to communicate with each other, if the service communication is
satisfying the contracts, and if there are performance bottlenecks in the communication.</p></span></div><h3 id=evolutionary-data class="relative group">Evolutionary Data <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#evolutionary-data aria-label=Anchor>#</a></span></h3><blockquote><p>“Evolutionary design in databases occurs when developers can build and evolve the structure of the database as
requirements change over time”</p></blockquote><p>This requires migrations to change the database schema:</p><ul><li>Versioned: The database schema is versioned, and migrations are applied in order.</li><li>Incremental: Migrations are applied incrementally, so that the database is always in a consistent state.</li><li>Tested: Migrations are tested to ensure that they work correctly.</li><li>Respect legacy data and integration points: Data migrations should keep data in a backwards compatible way if there
are dependencies on the data.</li></ul><p>Fitness functions may also be used to ensure that data constraints are met, for example that identify is kept throughout
the system, or that data deletions are propagated to other services.</p><div class="flex rounded-md bg-primary-100 px-4 py-3 dark:bg-primary-900"><span class="pe-3 text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg>
</span></span><span class=dark:text-neutral-300><p>I am missing the concept of database normalisations in this context. Databases normalisation is a process of organizing
a relational database according to a set of defined rules to ensure data integrity and minimize redundancy.</p><p>Depending on the use case the highest normal form of a database is not always the one that satisfies the requirements
the best, still in my experience many databases that where hard to evolve where not normalized enough.</p></span></div><h2 id=my-opinion class="relative group">My Opinion <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#my-opinion aria-label=Anchor>#</a></span></h2><p>Enabling a data driven work flow for architecture decisions is a great way to document and communicate architectural
decisions that will work better than long wiki pages. Fitness functions put technical product goals into code, and make
them measurable.
The book provides a great overview of the concept and examples of fitness functions, and how to implement them into the
development process. In between I also learned more on software topology and the importance of component coupling.
When putting that into practice, the most emphasis lies on the possibility of incremental changes (as in continuous
delivery).</p><p>I am looking forward to applying the concept of fitness functions to my work, and maybe I have motivated you to also
read a new book.</p><p>Happy coding :)</p></div></section><footer class="max-w-prose pt-8 print:hidden"><div class=flex><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Sofia Fischer</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=mailto:sofia@philodev.com target=_blank aria-label=Email rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://github.com/sofia-fischer target=_blank aria-label=Github rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://www.linkedin.com/in/sofia-fischer-58b1611b9/ target=_blank aria-label=Linkedin rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></a></div></div></div></div><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="group flex" href=/posts/2024-09-o-auth-2/><span class="me-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&larr;</span><span class="ltr:hidden rtl:inline">&rarr;</span></span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Understanding other oAuth flows</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2024-09-10 10:20:44 +0200 CEST">10 September 2024</time>
</span></span></a></span><span></span></div></div></footer></article></main><div class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12" id=to-top hidden=true><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div><footer class="py-10 print:hidden"><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2024
Sofia Fischer</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://github.com/jpanther/congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="flex flex-row items-center"><div class="me-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"><button id=appearance-switcher-0 type=button aria-label="appearance switcher"><div class="flex h-12 w-12 items-center justify-center dark:hidden" title="Switch to dark appearance"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="hidden h-12 w-12 items-center justify-center dark:flex" title="Switch to light appearance"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div></div></footer></div></body></html>